# Picom Custom Configuration - FT-Labs Animation Fork
# All animation options documented

#################################
#          Backend              #
#################################
backend = "glx";
vsync = false;
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
use-damage = true;

#################################
#       Animation Settings      #
#################################
# Enable animations
animations = true;

# Spring-based animation parameters
animation-stiffness-in-tag = 125;      # Speed for windows in current tag
animation-stiffness-tag-change = 90.0; # Speed when switching tags
animation-window-mass = 0.4;           # Mass parameter (affects momentum)
animation-dampening = 15;              # Friction/dampening
animation-clamping = true;             # Clamp animation values

# Animation types available:
#   none            - No animation
#   fly-in          - Windows fly in from random directions
#   maximize        - Pop from center of screen
#   minimize        - Shrink to center of screen
#   slide-in-center - Move from upper-center to position
#   slide-out-center- Move to upper-center of screen
#   slide-left      - Slide from right to left
#   slide-right     - Slide from left to right
#   slide-down      - Slide from top downward
#   slide-up        - Slide upward to top
#   squeeze         - Blink-like from center y-position
#   squeeze-bottom  - Squeeze from bottom
#   zoom            - Scale from/to center of window

# Window open animation
animation-for-open-window = "zoom";

# Window close/minimize animation
animation-for-unmap-window = "squeeze";

# Popup/transient window animation
animation-for-transient-window = "slide-up";

# Tag/workspace change animations (FT-Labs)
animation-for-prev-tag = "minimize";
animation-for-next-tag = "slide-in-center";
enable-fading-prev-tag = true;
enable-fading-next-tag = true;

# Exclude windows from animations
# animation-exclude = [
#   "class_g *= 'flameshot'",
#   "class_g *= 'i3lock'"
# ];

#################################
#          Shadows              #
#################################
shadow = true;
shadow-radius = 28;
shadow-offset-x = -18;
shadow-offset-y = -18;
shadow-opacity = 0.55;

# Dracula shadow color
shadow-red = 0.17;
shadow-green = 0.16;
shadow-blue = 0.21;

shadow-exclude = [
    "name = 'Notification'",
    "class_g = 'Conky'",
    "class_g ?= 'Notify-osd'",
    "class_g = 'slop'",
    "_GTK_FRAME_EXTENTS@",
    "window_type = 'dock'",
    "window_type = 'desktop'"
];

#################################
#          Fading               #
#################################
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 5;

#################################
#       Transparency            #
#################################
inactive-opacity = 0.88;
active-opacity = 0.95;
frame-opacity = 0.85;
inactive-opacity-override = false;
inactive-dim = 0.3;

#################################
#          Blur                 #
#################################
blur: {
  method = "dual_kawase";
  strength = 10;
  deviation = 0.0;
  kernel = "11x11gaussian";
  background = true;
  background-frame = true;
  background-fixed = true;
}

blur-background-exclude = [
    "window_type = 'desktop'",
    "class_g = 'slop'",
    "_GTK_FRAME_EXTENTS@",
    "_NET_WM_STATE *= '_NET_WM_STATE_FULLSCREEN'"
];

#################################
#      Rounded Corners          #
#################################
corner-radius = 14;
round-borders = 1;

rounded-corners-exclude = [
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "_NET_WM_STATE *= '_NET_WM_STATE_FULLSCREEN'"
];

#################################
#      General Settings         #
#################################
mark-wmwin-focused = true;
mark-ovredir-focused = true;
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;
unredir-if-possible = true;
log-level = "info";

#################################
#      Window Type Rules        #
#################################
wintypes:
{
    tooltip = { fade = true; shadow = true; opacity = 0.95; focus = true; };
    dock = { shadow = false; clip-shadow-above = true; };
    dnd = { shadow = false; };
    popup_menu = { opacity = 0.95; shadow = true; fade = true; };
    dropdown_menu = { opacity = 0.95; shadow = true; fade = true; };
    notification = { shadow = true; fade = true; opacity = 0.95; };
    normal = { shadow = true; fade = true; };
    desktop = { shadow = false; blur-background = false; };
};
